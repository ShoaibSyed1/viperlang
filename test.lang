fn main() {
    let r = Range.new(0, 10);

    print! while true {
        let val = r.next();

        if val has val {
            print! val;
        } else {
            break val;
        };
    };
}

class Range {
    let start: int;
    let end: int;
    let inc: int;

    let cur: int;

    class fn new(start: int, end: int): Range {
        make Range {
            start: start,
            end: end,
            inc: 1,

            cur: start,
        }
    }

    class fn new_inc(start: int, end: int, inc: int): Range {
        make Range {
            start: start,
            end: end,
            inc: inc,

            cur: start,
        }
    }

    fn next(): option int {
        let ret = self.cur;

        if self.cur >= self.end {
            none(int)
        } else {
            self.cur += 1;

            some(ret)
        }
    }
}